(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63233598"],{"24eb":function(e,t,a){"use strict";a.r(t);var o,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order"},[a("van-cell-group",[e.checkedAddress?a("van-cell",{attrs:{isLink:"",title:"收货地址"},on:{click:function(t){return e.goAddressList()}}},[a("div",{attrs:{slot:"label"},slot:"label"},[a("div",[a("span",[e._v(e._s(e.checkedAddress.name)+" ")]),a("span",[e._v(e._s(e.checkedAddress.tel)+" ")])]),a("div",[e._v("\r\n        "+e._s(e.checkedAddress.addressDetail)+"\r\n      ")])])]):e._e()],1),a("van-cell-group",[a("van-cell",{staticClass:"order-coupon",attrs:{title:"优惠券","is-link":"",value:e.getCouponValue()},on:{click:e.getCoupons}})],1),a("van-popup",{attrs:{position:"bottom"},model:{value:e.showList,callback:function(t){e.showList=t},expression:"showList"}},[a("van-coupon-list",{attrs:{coupons:e.coupons,"chosen-coupon":e.chosenCoupon,"disabled-coupons":e.disabledCoupons},on:{change:e.onChange,exchange:e.onExchange}})],1),e._l(e.checkedGoodsList,(function(t){return a("van-card",{key:t.id,attrs:{title:t.goodsName,num:t.number,price:t.price+".00",thumb:t.picUrl}},[a("div",{attrs:{slot:"desc"},slot:"desc"},[a("div",{staticClass:"van-card__desc"},e._l(t.specifications,(function(t,o){return a("van-tag",{key:o,staticStyle:{"margin-right":"6px"},attrs:{plain:""}},[e._v("\r\n            "+e._s(t)+"\r\n          ")])})),1)])])})),a("van-cell-group",[a("van-cell",{attrs:{title:"商品金额"}},[a("span",{staticClass:"red"},[e._v(e._s(e._f("yuan")(100*e.goodsTotalPrice)))])]),a("van-cell",{attrs:{title:"邮费"}},[a("span",{staticClass:"red"},[e._v(e._s(e._f("yuan")(100*e.freightPrice)))])]),a("van-cell",{attrs:{title:"优惠券"}},[a("span",{staticClass:"red"},[e._v("-"+e._s(e._f("yuan")(100*e.couponPrice)))])]),a("van-field",{attrs:{placeholder:"请输入备注",label:"订单备注"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}},[a("template",{slot:"icon"},[e._v(e._s(e.message.length)+"/50")])],2)],1),a("van-submit-bar",{attrs:{price:100*e.actualPrice,label:"总计：",buttonText:"提交订单",disabled:e.isDisabled},on:{submit:e.onSubmit}})],2)},n=[],i=a("bd86"),c=(a("8a58"),a("e41f")),r=(a("e324"),a("453b")),d=(a("b76c"),a("ac3c")),u=(a("5f1a"),a("a3e2")),l=(a("be7f"),a("565f")),p=(a("9cb7"),a("66fd")),b=(a("be39"),a("efa0")),f=(a("7f7f"),a("e7e5"),a("d399")),h=a("4ec3"),v=a("3c96"),g=(a("5a0c"),{data:function(){return{checkedGoodsList:[],checkedAddress:{},availableCouponLength:0,goodsTotalPrice:0,freightPrice:0,couponPrice:0,grouponPrice:0,orderTotalPrice:0,actualPrice:0,message:"",isDisabled:!1,showList:!1,chosenCoupon:-1,coupons:[],disabledCoupons:[]}},created:function(){this.init()},methods:{onSubmit:function(){var e=this,t=Object(v["a"])("AddressId","CartId","CouponId","UserCouponId"),a=t.AddressId,o=t.CartId,s=t.CouponId,n=t.UserCouponId;null!==a?(this.isDisabled=!0,Object(h["P"])({addressId:a,cartId:o,couponId:s,userCouponId:n,grouponLinkId:0,grouponRulesId:0,message:this.message}).then((function(t){Object(v["c"])({AddressId:0,CartId:0,CouponId:0});var a=t.data.data.orderId;e.$router.push({name:"payment",params:{orderId:a}})})).catch((function(t){e.isDisabled=!1,e.$toast("下单失败")}))):f["a"].fail("请设置收货地址")},goAddressList:function(){this.$router.push({path:"/user/address"})},getCouponValue:function(){return 0!==this.couponPrice?"-¥"+this.couponPrice+".00元":0!==this.availableCouponLength?this.availableCouponLength+"张可用":"没有可用优惠券"},getCoupons:function(){var e=this,t=Object(v["a"])("AddressId","CartId","CouponId"),a=(t.AddressId,t.CartId);t.CouponId;Object(h["B"])({cartId:a,grouponRulesId:0}).then((function(t){var a=t.data.data.list;e.coupons=[],e.disabledCoupons=[];for(var o=0;o<a.length;o++){var s=a[o],n={id:s.id,cid:s.cid,name:s.name,condition:"满"+s.min+"元可用",value:100*s.discount,description:s.desc,startAt:new Date(s.startTime).getTime()/1e3,endAt:new Date(s.endTime).getTime()/1e3,valueDesc:s.discount,unitDesc:"元"};s.available?e.coupons.push(n):e.disabledCoupons.push(n)}e.showList=!0}))},init:function(){var e=this,t=Object(v["a"])("AddressId","CartId","CouponId","UserCouponId"),a=t.AddressId,o=t.CartId,s=t.CouponId,n=t.UserCouponId;Object(h["p"])({cartId:o,addressId:a,couponId:s,userCouponId:n,grouponRulesId:0}).then((function(t){var a=t.data.data;e.checkedGoodsList=a.checkedGoodsList,e.checkedAddress=a.checkedAddress,e.availableCouponLength=a.availableCouponLength,e.actualPrice=a.actualPrice,e.couponPrice=a.couponPrice,e.grouponPrice=a.grouponPrice,e.freightPrice=a.freightPrice,e.goodsTotalPrice=a.goodsTotalPrice,e.orderTotalPrice=a.orderTotalPrice,Object(v["c"])({AddressId:a.addressId,CartId:a.cartId,CouponId:a.couponId,UserCouponId:a.userCouponId})}))},onChange:function(e){if(this.showList=!1,this.chosenCoupon=e,-1===e)Object(v["c"])({CouponId:-1,UserCouponId:-1});else{var t=this.coupons[e].cid,a=this.coupons[e].id;Object(v["c"])({CouponId:t,UserCouponId:a})}this.init()},onExchange:function(){this.$toast("兑换暂不支持")}},components:(o={},Object(i["a"])(o,f["a"].name,f["a"]),Object(i["a"])(o,b["a"].name,b["a"]),Object(i["a"])(o,p["a"].name,p["a"]),Object(i["a"])(o,l["a"].name,l["a"]),Object(i["a"])(o,u["a"].name,u["a"]),Object(i["a"])(o,d["a"].name,d["a"]),Object(i["a"])(o,r["a"].name,r["a"]),Object(i["a"])(o,c["a"].name,c["a"]),o)}),m=g,I=(a("5efb"),a("2877")),C=Object(I["a"])(m,s,n,!1,null,"4f5c05d0",null);t["default"]=C.exports},"3b42":function(e,t,a){},"5efb":function(e,t,a){"use strict";var o=a("a34e"),s=a.n(o);s.a},"5f1a":function(e,t,a){"use strict";a("68ef"),a("9b7e")},"8a58":function(e,t,a){"use strict";a("68ef"),a("09fe"),a("4d75")},a34e:function(e,t,a){},be39:function(e,t,a){"use strict";a("68ef"),a("09fe"),a("3b42")},be7f:function(e,t,a){"use strict";a("68ef"),a("09fe"),a("1146")},e41f:function(e,t,a){"use strict";var o=a("d282"),s=a("a142"),n=a("6605"),i=a("ad06"),c=Object(o["a"])("popup"),r=c[0],d=c[1];t["a"]=r({mixins:[n["a"]],props:{round:Boolean,duration:Number,closeable:Boolean,transition:String,safeAreaInsetBottom:Boolean,closeIcon:{type:String,default:"cross"},closeIconPosition:{type:String,default:"top-right"},position:{type:String,default:"center"},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},beforeCreate:function(){var e=this,t=function(t){return function(a){return e.$emit(t,a)}};this.onClick=t("click"),this.onOpened=t("opened"),this.onClosed=t("closed")},render:function(){var e,t=arguments[0];if(this.shouldRender){var a=this.round,o=this.position,n=this.duration,c=this.transition||("center"===o?"van-fade":"van-popup-slide-"+o),r={};return Object(s["b"])(n)&&(r.transitionDuration=n+"s"),t("transition",{attrs:{name:c},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[t("div",{directives:[{name:"show",value:this.value}],style:r,class:d((e={round:a},e[o]=o,e["safe-area-inset-bottom"]=this.safeAreaInsetBottom,e)),on:{click:this.onClick}},[this.slots(),this.closeable&&t(i["a"],{attrs:{role:"button",tabindex:"0",name:this.closeIcon},class:d("close-icon",this.closeIconPosition),on:{click:this.close}})])])}}})},efa0:function(e,t,a){"use strict";var o=a("2638"),s=a.n(o),n=a("d282"),i=a("ba31"),c=a("b650"),r=a("ad06"),d=Object(n["a"])("submit-bar"),u=d[0],l=d[1],p=d[2];function b(e,t,a,o){var n=t.tip,d=t.price,u=t.tipIcon;function b(){if("number"===typeof d){var a=t.currency+" "+(d/100).toFixed(t.decimalLength);return e("div",{class:l("text")},[e("span",[t.label||p("label")]),e("span",{class:l("price")},[a]),t.suffixLabel&&e("span",{class:l("suffix-label")},[t.suffixLabel])])}}function f(){if(a.tip||n)return e("div",{class:l("tip")},[u&&e(r["a"],{class:l("tip-icon"),attrs:{name:u}}),n&&e("span",{class:l("tip-text")},[n]),a.tip&&a.tip()])}return e("div",s()([{class:l({"safe-area-inset-bottom":t.safeAreaInsetBottom})},Object(i["b"])(o)]),[a.top&&a.top(),f(),e("div",{class:l("bar")},[a.default&&a.default(),b(),e(c["a"],{attrs:{square:!0,size:"large",type:t.buttonType,loading:t.loading,disabled:t.disabled,text:t.loading?"":t.buttonText},class:l("button"),on:{click:function(){Object(i["a"])(o,"submit")}}})])])}b.props={tip:String,label:String,price:Number,tipIcon:String,loading:Boolean,disabled:Boolean,buttonText:String,suffixLabel:String,safeAreaInsetBottom:Boolean,decimalLength:{type:Number,default:2},currency:{type:String,default:"¥"},buttonType:{type:String,default:"danger"}},t["a"]=u(b)}}]);